<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" th:replace="~{layout :: layout(~{::section})}">
<body>
<section>
    <div class="container">
        <h2 th:text="${isEdit} ? 'Edit Employee' : 'Register New Employee'">Employee Form</h2>

        <form th:action="${isEdit} ? @{/employees/edit/{e}(e=${employee.email})} : @{/employees/add}"
              th:object="${employee}" method="post">

            <div class="form-group">
                <label>Full Name:</label>
                <input type="text" th:field="*{name}" required />
                <span th:if="${#fields.hasErrors('name')}" th:errors="*{name}" class="text-danger"></span>
            </div>

            <div class="form-group">
                <label>Email Address:</label>
                <input type="email" th:field="*{email}" required th:readonly="${isEdit}" />
                <span th:if="${#fields.hasErrors('email')}" th:errors="*{email}" class="text-danger"></span>
            </div>

            <div class="form-group">
                <label>Phone:</label>
                <input type="text" th:field="*{phone}" required />
                <span th:if="${#fields.hasErrors('phone')}" th:errors="*{phone}" class="text-danger"></span>
            </div>

            <div class="form-group" th:if="${!isEdit}">
                <label>Password:</label>
                <input type="password" th:field="*{password}" required />
                <span th:if="${#fields.hasErrors('password')}" th:errors="*{password}" class="text-danger"></span>
            </div>

            <div class="form-group">
                <label>Birth Date:</label>
                <input type="date"
                       id="birthDate"
                       name="birthDate"
                       th:value="${employee.birthDate != null} ? ${#temporals.format(employee.birthDate, 'yyyy-MM-dd')} : ''"
                       required />
                <span th:if="${#fields.hasErrors('birthDate')}" th:errors="*{birthDate}" class="text-danger"></span>
            </div>

            <button type="submit" class="btn" th:text="${isEdit} ? 'Update' : 'Save'"></button>
            <a th:href="@{/employees}" class="btn-secondary">Cancel</a>
        </form>
    </div>
</section>
</body>
</html>