<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security" th:fragment="layout(content)">
<head>
    <meta charset="UTF-8">
    <title>Bookstore Management</title>
    <link rel="stylesheet" th:href="@{/css/style.css}">
</head>
<body>
<header>
    <nav>
        <div class="container" style="display: flex; justify-content: space-between;">
            <strong style="color: white; font-size:20px;">BookStore</strong>
            <div class="lang-links">
                <a th:href="@{/?lang=en}">EN</a> | <a th:href="@{/?lang=ru}">RU</a>
            </div>

            <a th:href="@{/}" th:text="#{nav.home}">Home</a>
            <a th:href="@{/books}" th:text="#{nav.books}">Books</a>

            <a sec:authorize="hasAnyRole('EMPLOYEE', 'ADMIN')"
               th:href="@{/clients}"
               th:text="#{nav.clients}">Clients</a>

            <a sec:authorize="hasRole('ADMIN')"
               th:href="@{/employees}"
               th:text="#{nav.employees}">Staff Portal</a>

            <a sec:authorize="hasRole('CLIENT')" th:href="@{/orders/new}" th:text="#{nav.placeOrder}">Place Order</a>

            <a sec:authorize="hasRole('CLIENT')" th:href="@{/profile}" th:text="#{nav.profile}">Profile</a>

            <span sec:authorize="isAuthenticated()" style="float:right">
                <form th:action="@{/logout}" method="post" style="display:inline">
                    <button type="submit" class="btn-link"
                            style="background: transparent; border: 1px solid white; color: white; border-radius: 4px; padding: 2px 8px; cursor: pointer;"
                            th:text="#{nav.logout}">Logout</button>
                </form>
            </span>
            <a sec:authorize="!isAuthenticated()"
               th:href="@{/login}"
               th:text="#{nav.login}"
               style="float:right">Login</a>
        </div>
    </nav>
</header>

<main class="container">
    <div class="notifications">
        <div th:if="${not #strings.isEmpty(successMessage)}" class="alert-success"
             style="background-color: #d4edda; color: #155724; padding: 15px; border-radius: 5px; margin-bottom: 20px; border: 1px solid #c3e6cb;">
            <span th:text="${successMessage}">Success!</span>
        </div>

        <div th:if="${not #strings.isEmpty(errorMessage)}" class="alert-error"
             style="background-color: #f8d7da; color: #721c24; padding: 15px; border-radius: 5px; margin-bottom: 20px; border: 1px solid #f5c6cb;">
            <span th:text="${errorMessage}">Error!</span>
        </div>
    </div>

    <div th:replace="${content}"></div>
</main>

<footer>
    <p>&copy; 2026 Bookstore Service Portal</p>
</footer>
</body>
</html>